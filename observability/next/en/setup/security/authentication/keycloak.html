<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KeyCloak :: SUSEÂ® Rancher Prime: Observability</title>
    <link rel="prev" href="oidc.html">
    <link rel="next" href="service_tokens.html">
    <meta name="description" content="SUSE Observability Self-hosted">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../../../_/css/search.css">
<link rel="icon" href="../../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../../../_/css/vendor/light.css">
<!-- <script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script> -->
    <script>var uiRootPath = '../../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a class=" navbar-logo" href="https://documentation.suse.com/" aria-label="SUSE Documentation Home"><img class="logo"
            src="../../../../../../_/img/logo.svg" alt="SUSE logo"/></a>
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">
            <img src="../../../../../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources">
          </div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/rancher/stackstate-product-docs"><i class="fab fa-github"></i>&nbsp;Observability</a>
            <div class="has-submenu">
              <a class="navbar-item" href="#" ><i class="fas fa-file-alt"></i>&nbsp;Report Issue &nbsp;<i class="fas fa-chevron-right"></i></a>
              <div class="submenu">
                <a class="navbar-item" href="https://scc.suse.com">SCC (Recommended)</a>
                <a class="navbar-item" href="https://github.com/rancher/stackstate-product-docs/issues">GitHub Issue</a>
              </div>
            </div>
            <a class="navbar-item" href="https://github.com/rancher/product-docs-playbook/blob/main/CONTRIBUTING.md"><i class="fas fa-user-edit"></i>&nbsp;Contribute</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link"><img src="../../../../../../_/img/language.png" class="langIcon Language" alt="Language"
              title="Language"></div>
          <div class="navbar-dropdown">
            <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
              <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../../../_/img/engFlag.svg" class="langIcon english">-->
                &nbsp;English
              </a>
            <!-- LANGUAGESELECTOR -->
          </div>
        </div>
        <!--
        <div class="navbar-item">
          <a href="https://twitter.com/SUSE">
            <img alt="X-logo" class="x-logo" src="../../../../../../_/img/x-logo-white.png">
          </a>
        </div>
        -->
      </div>
    </div>

    <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="observability" data-version="next">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../../classic.html">Observability</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#README.adoc">SUSE Observability docs!</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../classic.html">Docs for all SUSE Observability products</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../k8s-quick-start-guide.html">Quick start guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../k8s-getting-started.html">SUSE Observability walk-through</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../k8s-suse-rancher-prime.html">SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../k8s-suse-rancher-prime-air-gapped.html">Air-gapped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../k8s-suse-rancher-prime-agent-air-gapped.html">Agent Air-gapped</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/troubleshooting/k8s-guided-troubleshooting.html">What is guided troubleshooting?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/troubleshooting/k8s-configuration.html">YAML Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/troubleshooting/k8s-changes.html">Changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/troubleshooting/k8s-logs.html">Logs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/alerting/k8s-monitors.html">Monitors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/alerting/kubernetes-monitors.html">Out of the box monitors for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../use/alerting/notifications/README.html">Notifications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/alerting/notifications/configure.html">Configure notifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../use/alerting/notifications/channels/README.html">Notification channels</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../use/alerting/notifications/channels/slack.html">Slack</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../use/alerting/notifications/channels/teams.html">Teams</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../use/alerting/notifications/channels/webhook.html">Webhook</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../use/alerting/notifications/channels/opsgenie.html">Opsgenie</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/alerting/notifications/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="#dynamic/customize-alerting.adoc">Customize</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/alerting/k8s-add-monitors-cli.html">Add a monitor using the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/alerting/k8s-override-monitor-arguments.html">Override monitor arguments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/alerting/k8s-write-remediation-guide.html">Write a remediation guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/metrics/k8sTs-explore-metrics.html">Explore Metrics</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="#dynamic/custom-charts.adoc">Custom charts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/k8s-add-charts.html">Adding custom charts to components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/k8s-writing-promql-for-charts.html">Writing PromQL queries for representative charts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/k8sTs-metrics-troubleshooting.html">Troubleshooting custom charts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="#dynamic/advanced-metrics.adoc">Advanced Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/k8s-stackstate-grafana-datasource.html">Grafana Datasource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/k8s-prometheus-remote-write.html">Prometheus remote_write</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/metrics/open-metrics.html">OpenMetrics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/logs/k8sTs-explore-logs.html">Explore Logs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/logs/k8sTs-log-shipping.html">Log Shipping</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/traces/k8sTs-explore-traces.html">Explore Traces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../configure/health/health-synchronization.html">Health synchronization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../configure/health/send-health-data/README.html">Send health data over HTTP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../configure/health/send-health-data/send-health-data.html">Send health data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../configure/health/send-health-data/repeat_snapshots.html">Repeat Snapshots JSON</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../configure/health/send-health-data/repeat_states.html">Repeat States JSON</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../configure/health/send-health-data/transactional_increments.html">Transactional Increments JSON</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../configure/health/debug-health-sync.html">Debug health synchronization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/views/k8s-views.html">Kubernetes views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/views/k8s-custom-views.html">Custom views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/views/k8s-component-views.html">Component views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/views/k8s-explore-views.html">Explore views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../use/views/k8s-view-structure.html">View structure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-overview-perspective.html">Overview perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-highlights-perspective.html">Highlights perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-topology-perspective.html">Topology perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-events-perspective.html">Events perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-metrics-perspective.html">Metrics perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-traces-perspective.html">Traces perspective</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/views/k8s-filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../use/stackstate-ui/k8sTs-keyboard-shortcuts.html">Keyboard shortcuts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/stackstate-ui/k8sTs-timeline-time-travel.html">Timeline and time travel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../k8s-network-configuration-saas.html">Network configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../agent/k8s-network-configuration-proxy.html">Proxy Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../k8s-suse-rancher-prime-agent-air-gapped.html">Using a custom registry</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../agent/k8s-custom-secrets-setup.html">Custom Secret Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../agent/k8sTs-agent-request-tracing.html">Request tracing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../agent/k8sTs-agent-request-tracing-certificates.html">Certificates for sidecar injection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../otel/getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../otel/collector.html">Open telemetry collector</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../otel/languages/README.html">Languages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../otel/languages/sdk-exporter-config.html">Generic Exporter configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../otel/languages/java.html">Java</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../otel/languages/node.js.html">Node.js</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../otel/languages/dot-net.html">.NET</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../otel/languages/verify.html">Verify the results</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../otel/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cli/cli-sts.html">SUSE Observability CLI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../install-stackstate/README.html">Install SUSE Observability</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../install-stackstate/requirements.html">Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/README.html">Kubernetes / OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/kubernetes_install.html">Kubernetes install</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/openshift_install.html">OpenShift install</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/required_permissions.html">Required Permissions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/customize_config.html">Override default configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/storage.html">Configure storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/ingress.html">Exposing SUSE Observability outside of the cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../install-stackstate/initial_run_guide.html">Initial run guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../install-stackstate/troubleshooting.html">Troubleshooting</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../configure/logging/kubernetes-logs.html">Logs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../configure-stackstate/README.html">Configure SUSE Observability</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configure-stackstate/slack-notifications.html">Slack notifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configure-stackstate/email-notifications.html">E-mail notifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../stackpacks/about-stackpacks.html">Stackpacks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../release-notes/README.html">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/20240911112250.html">v2.0.0 - 11/09/2024</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/20240918082712.html">v2.0.1 - 18/09/2024</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/20241001154902.html">v2.0.2 - 01/10/2024</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../upgrade-stackstate/README.html">Upgrade SUSE Observability</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade-stackstate/steps-to-upgrade.html">Steps to upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade-stackstate/version-specific-upgrade-instructions.html">Version-specific upgrade instructions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/uninstall.html">Uninstall SUSE Observability</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../install-stackstate/kubernetes_openshift/no_internet/README.html">Air-gapped</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../k8s-suse-rancher-prime-air-gapped.html">SUSE Observability air-gapped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../k8s-suse-rancher-prime-agent-air-gapped.html">SUSE Observability Kubernetes Agent air-gapped</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../data-management/README.html">Data management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../data-management/backup_restore/README.html">Backup and Restore</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../data-management/backup_restore/kubernetes_backup.html">Kubernetes backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../data-management/backup_restore/configuration_backup.html">Configuration backup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data-management/data_retention.html">Data retention</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data-management/clear_stored_data.html">Clear stored data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../README.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="README.html">Authentication</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="authentication_options.html">Authentication options</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="file.html">File-based</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ldap.html">LDAP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="oidc.html">Open ID Connect (OIDC)</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="keycloak.html">KeyCloak</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="service_tokens.html">Service tokens</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../rbac/README.html">RBAC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rbac/role_based_access_control.html">Role-based Access Control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rbac/rbac_permissions.html">Permissions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rbac/rbac_roles.html">Roles</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rbac/rbac_scopes.html">Scopes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../self-signed-certificates.html">Self-signed certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/security/k8s-service-tokens.html">Service Tokens</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../use/security/k8s-ingestion-api-keys.html">Ingestion API Keys</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../saas/user-management.html">User Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../develop/reference/k8sTs-stql_reference.html">SUSE Observability Query Language (STQL)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../develop/reference/k8sTs-chart-units.html">Chart units</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../configure/topology/identifiers.html">Topology Identifiers</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Observability</span>
    <span class="version">Next</span>
  </div>
  <ul class="components">
        <li class="component is-current">
          <div class="title"><a href="../../../classic.html">Observability</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="../../../classic.html">Next</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../classic.html" aria-label="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../classic.html">Observability</a></li>
    <li><a href="../README.html">Security</a></li>
    <li><a href="README.html">Authentication</a></li>
    <li><a href="keycloak.html">KeyCloak</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/rancher/stackstate-product-docs/edit/main/docs/next/modules/en/pages/setup/security/authentication/keycloak.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">KeyCloak</h1>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SUSE Observability can authenticate using KeyCloak as an authentication provider, you will need to configure both SUSE Observability and KeyCloak to be able to talk to each other. The following sections describe the respective setups.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication_flow"><a class="anchor" href="#_authentication_flow"></a>Authentication flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using Keycloak as an authentication provider, SUSE Observability will use OIDC (OpenID Connect) to authenticate users. The following diagram describes the authentication flow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/k8s/keycloak-flow.png" alt="Keycloak authentication flow">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_keycloak"><a class="anchor" href="#_configure_keycloak"></a>Configure KeyCloak</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you can configure SUSE Observability to authenticate using KeyCloak, you need to add a new client configuration to the KeyCloak Authentication Server. The necessary settings for the client are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Client ID</strong> - The ID of the client that&#8217;s connecting, we recommend naming this <code>stackstate</code></p>
</li>
<li>
<p><strong>Client Protocol</strong> - Set to <code>openid-connect</code></p>
</li>
<li>
<p><strong>Access Type</strong> - Set to <code>confidential</code>, so that a secret is used to establish the connection between KeyCloak and SUSE Observability</p>
</li>
<li>
<p><strong>Standard Flow Enabled</strong> - Set to <code>Enabled</code></p>
</li>
<li>
<p><strong>Implicit Flow Enabled</strong> - Set to <code>Disabled</code></p>
</li>
<li>
<p><strong>Root URL</strong> - The root location of SUSE Observability (the same value configured in as base URL of the SUSE Observability configuration</p>
</li>
<li>
<p><strong>Valid redirect URIs</strong> - This should be <code>/loginCallback/*</code></p>
</li>
<li>
<p><strong>Base URL</strong> - This should point to the root location of SUSE Observability</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_suse_observability"><a class="anchor" href="#_configure_suse_observability"></a>Configure SUSE Observability</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kubernetes"><a class="anchor" href="#_kubernetes"></a>Kubernetes</h3>
<div class="paragraph">
<p>To configure SUSE Observability to authenticate using KeyCloak, KeyCloak details and user role mapping needs to be added to the file <code>authentication.yaml</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">stackstate:
  authentication:
    keycloak:
      url: "https://keycloak.acme.com/auth"
      realm: acme
      authenticationMethod: client_secret_basic
      clientId: stackstate
      secret: "8051a2e4-e367-4631-a0f5-98fc9cdc564d"
      jwsAlgorithm: RS256
      # scope is optional. By default `openid`, `profile` and `email` are requested
      # scope: ["openid", "profile", "email"]
      # jwtClaims:
      #   usernameField: preferred_username
      #   groupsField: roles

    # map the roles from Keycloak to the
    # 4 standard subjects in SUSE Observability (guest, powerUser, admin and platformAdmin)
    roles:
      guest: ["keycloak-guest-role-for-stackstate"]
      powerUser: ["keycloak-power-user-role-for-stackstate"]
      admin: ["keycloak-admin-role-for-stackstate"]
      platformAdmin: ["keycloak-platformadmin-role-for-stackstate"]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Note:</strong>
By default when authenticating a user the request to KeyCloak specifies a default scope of <code>openid profile email</code> if a custom scope has not been specified on the configuration. Verify the <code>Client scopes</code> on your KeyCloak instance to be sure that the default scope is correct or you need a custom one.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Follow the steps below to configure SUSE Observability to authenticate using KeyCloak:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <code>authentication.yaml</code> - add details of the KeyCloak authentication provider (see the example above). The KeyCloak specific values can be obtained from the client configuration in KeyCloak:</p>
<div class="ulist">
<ul>
<li>
<p><strong>url</strong> - The base URI for the KeyCloak instance</p>
</li>
<li>
<p><strong>realm</strong> - The KeyCloak realm to connect to</p>
</li>
<li>
<p><strong>authenticationMethod</strong> - Set to <code>client_secret_basic</code>, this is currently the only supported value.</p>
</li>
<li>
<p><strong>clientId</strong> - The ID of the KeyCloak client as configured in KeyCloak</p>
</li>
<li>
<p><strong>secret</strong> - The secret attached to the KeyCloak client, which is used to authenticate this client to KeyCloak</p>
</li>
<li>
<p><strong>redirectUri</strong> - Optional: The URI where the login callback endpoint of SUSE Observability is reachable. Populated by default using the <code>stackstate.baseUrl</code>, but can be overridden (must be a fully qualified URL that points to the <code>/loginCallback</code> path)</p>
</li>
<li>
<p><strong>jwsAlgorithm</strong> - Set this to <code>RS256</code>, this is currently the only supported value.</p>
</li>
<li>
<p><strong>jwtClaims</strong> - Optional: The roles or username can be retrieved from a different attribute than the Keycloak default behavior</p>
<div class="ulist">
<ul>
<li>
<p><strong>usernameField</strong> - Optional: The field in the OIDC user profile that should be used as the username. By default, this will be the <code>preferred_username</code>.</p>
</li>
<li>
<p><strong>groupsField</strong> - Optional: SUSE Observability will always, and by default only, use the <code>roles</code> Keycloak provides. But it can also add roles from the field specified here. This is mainly useful when Keycloak is mapping roles/groups from a third-party system.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>In <code>authentication.yaml</code> - map user roles from KeyCloak to the correct SUSE Observability subjects using the <code>roles.guest</code>, <code>roles.powerUser</code>, <code>roles.platformAdmin</code> or <code>roles.admin</code> settings (see the example above). For details, see the <a href="../rbac/rbac_permissions.adoc#predefined-roles">default SUSE Observability roles</a>. More SUSE Observability roles can also be created, see the <a href="../rbac/">RBAC documentation</a>.</p>
</li>
<li>
<p>Store the file <code>authentication.yaml</code> together with the <code>values.yaml</code> file from the SUSE Observability installation instructions.</p>
</li>
<li>
<p>Run a Helm upgrade to apply the changes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"> helm upgrade \
   --install \
   --namespace suse-observability \
   --values values.yaml \
   --values authentication.yaml \
 suse-observability \
 suse-observability/suse-observability</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Note:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first run of the helm upgrade command will result in pods restarting, which may cause a short interruption of availability.</p>
</li>
<li>
<p>Include <code>authentication.yaml</code> on every <code>helm upgrade</code> run.</p>
</li>
<li>
<p>The authentication configuration is stored as a Kubernetes secret.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#authentication_options.adoc" class="xref unresolved">Authentication options</a></p>
</li>
<li>
<p><a href="../rbac/rbac_permissions.adoc#predefined-roles">Permissions for predefined SUSE Observability roles</a></p>
</li>
<li>
<p><a href="#../rbac/rbac_roles.adoc" class="xref unresolved">Create RBAC roles</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="oidc.html">Open ID Connect (OIDC)</a></span>
  <span class="next"><a href="service_tokens.html">Service tokens</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
<script src="../../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../../_/js/vendor/tabs.js"></script>


  </body>
</html>
